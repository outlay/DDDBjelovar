{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://172.20.10.2:8081","description":"Generated server url"}],"tags":[{"name":"Users","description":"Users operations"},{"name":"Reservations","description":"Reservations operations"},{"name":"Community houses","description":"Community houses operations"}],"paths":{"/api/v1/users":{"post":{"tags":["Users"],"summary":"Register user","operationId":"addUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupResponse"}}}},"409":{"description":"Conflict","content":{"application/json":{}}},"500":{"description":"Internal server error","content":{"application/json":{}}}}}},"/api/v1/users/login":{"post":{"tags":["Users"],"summary":"Fetches access token / authenticates user","operationId":"authenticateUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JwtResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{}}},"400":{"description":"Bad Request","content":{"application/json":{}}}}}},"/api/v1/reservations/{id}":{"get":{"tags":["Reservations"],"summary":"Fetches the reservation details by id","operationId":"fetchReservationById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ReservationDetailsResponse"}}}}}}},"/api/v1/reservations/reservations/user":{"get":{"tags":["Reservations"],"summary":"Fetches the reservations of a specific user by its id","operationId":"fetchReservationsByUserId","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ReservationResponse"}}}}}}}},"/api/v1/community-houses":{"get":{"tags":["Community houses"],"summary":"Fetches all community houses","operationId":"fetchCommunityHouses","responses":{"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommunityHouseResponse"}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}}}}},"/api/v1/community-houses/{id}":{"get":{"tags":["Community houses"],"summary":"Fetches the community house by ID","operationId":"fetchCommunityHouseByDates","parameters":[{"name":"id","in":"path","description":"ID of the community house to fetch","required":true,"schema":{"type":"string","description":"ID of the community house to fetch"}}],"responses":{"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApplicationError"}}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommunityHouseResponse"}}}}}}},"/api/v1/community-houses/{id}/availability":{"get":{"tags":["Community houses"],"summary":"Fetches the community house by ID if the house is available in those dates, otherwise returns 400","operationId":"fetchCommunityHouseByDates_1","parameters":[{"name":"id","in":"path","description":"ID of the community house to fetch","required":true,"schema":{"type":"string","description":"ID of the community house to fetch"}},{"name":"startDate","in":"query","description":"Start date of the reservation","required":true,"schema":{"type":"string","description":"Start date of the reservation"}},{"name":"endDate","in":"query","description":"End date of the reservation","required":true,"schema":{"type":"string","description":"End date of the reservation"}}],"responses":{"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApplicationError"}}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApplicationError"}}}}},"404":{"description":"Not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommunityHouseResponse"}}}}}}},"/api/v1/community-houses/search":{"get":{"tags":["Community houses"],"summary":"Fetches all community houses filtered by capacity, start and end date","operationId":"fetchCommunityHouses_1","parameters":[{"name":"startDate","in":"query","description":"Start date of the reservation","required":true,"schema":{"type":"string","description":"Start date of the reservation"}},{"name":"endDate","in":"query","description":"End date of the reservation","required":true,"schema":{"type":"string","description":"End date of the reservation"}},{"name":"capacity","in":"query","description":"Capacity of the community house","required":false,"schema":{"minimum":0,"type":"string","description":"Capacity of the community house"}}],"responses":{"400":{"description":"Bad request","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApplicationError"}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CommunityHouseResponse"}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApplicationError"}}}}}}}},"components":{"schemas":{"SignupRequest":{"required":["email","firstName","lastName","password"],"type":"object","properties":{"firstName":{"type":"string","description":"User's first name"},"lastName":{"type":"string","description":"User's last name"},"email":{"type":"string","description":"User's email"},"password":{"type":"string","description":"User's password"}}},"SignupResponse":{"required":["id"],"type":"object","properties":{"id":{"type":"integer","description":"User's id","format":"int64"}}},"LoginRequest":{"type":"object","properties":{"email":{"type":"string","description":"User's email"},"password":{"type":"string","description":"User's password"}}},"JwtResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"accessTokenExpires":{"type":"integer","format":"int64"},"type":{"type":"string"},"user":{"$ref":"#/components/schemas/UserResponse"}}},"UserResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"firstName":{"type":"string"},"lastName":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}},"ReservationDetailsResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"communityHouseName":{"type":"string"},"purposeId":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"reservationAmountId":{"type":"integer","format":"int64"},"recordId":{"type":"integer","format":"int64"},"bank":{"type":"string"},"iban":{"type":"string"},"localBoardName":{"type":"string"},"issueDate":{"type":"string","format":"date"},"dateTimeFrom":{"type":"string","format":"date-time"},"dateTimeTo":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["ZAHTJEV_POSLAN","ZAHTJEV_POTVRDEN","UGOVOR_NAPRAVLJEN","UGOVOR_POTPISAN_GRADONACELNIK","UGOVOR_POTPISAN_STRANKA","UGOVOR_PLACEN","JAMCEVINA_VRACENA","ZAHTJEV_OTKAZAN"]}}},"ReservationResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"communityHouseName":{"type":"string"},"dateTimeFrom":{"type":"string","format":"date-time"},"dateTimeTo":{"type":"string","format":"date-time"},"status":{"type":"string","enum":["ZAHTJEV_POSLAN","ZAHTJEV_POTVRDEN","UGOVOR_NAPRAVLJEN","UGOVOR_POTPISAN_GRADONACELNIK","UGOVOR_POTPISAN_STRANKA","UGOVOR_PLACEN","JAMCEVINA_VRACENA","ZAHTJEV_OTKAZAN"]}}},"ApplicationError":{"type":"object","properties":{"statusCode":{"type":"integer","format":"int32"},"message":{"type":"string"},"error":{"type":"string"},"timestamp":{"type":"string","format":"date-time"},"fieldErrors":{"type":"array","items":{"$ref":"#/components/schemas/FieldError"}}}},"FieldError":{"type":"object","properties":{"field":{"type":"string"},"message":{"type":"string"}}},"CommunityHouseResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"address":{"type":"string"},"squaring":{"type":"number"},"category":{"type":"string"},"cutleryRentAmountPerPerson":{"type":"number"},"approxNumberOfOccupants":{"type":"number","format":"double"},"note":{"type":"string"},"active":{"type":"boolean"},"coordinates":{"$ref":"#/components/schemas/CoordinatesResponse"},"images":{"type":"array","items":{"$ref":"#/components/schemas/ImageResponse"}}}},"CoordinatesResponse":{"type":"object","properties":{"latitude":{"type":"number"},"longitude":{"type":"number"}}},"ImageResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"url":{"type":"string"}}}}}}